var postBody = document.querySelector('.post-body')
var titleChapter = postBody.querySelectorAll('h2,h3')
if (1 <= titleChapter.length) {
    var i, leChapteraptor = []
    for (i = 0; i < titleChapter.length; i++) {
        anchorChapter = 'chapter-' + (i + 1)
        titleChapter[i].setAttribute('id', anchorChapter)
        titleChapter[i].setAttribute('title', 'Lên đầu trang')
        leChapteraptor[i] = '<li data-target=' + "#" + anchorChapter + '>' + titleChapter[i].innerHTML + '</li>'
    }
    $('.box_category').html('<p>Nội dung chính <label></label></p><ul class="chapter">' + leChapteraptor.join('') + '</ul>')
} else {
    $('.box_category').remove()
}
$(function() {
    var name_more = $('.post-body a[name=more]')
    if (name_more) {
        $('.box_category').insertAfter(name_more)
    } else {
        $('.box_category').remove()
    }
})
$('.box_category p>label').click(function() {
    $(this).toggleClass('show')
    $(this).parent().parent().find('ul').slideToggle('slow')
})
$('.box_category li').bind('click', function() {
    var target = $(this).attr('data-target')
    $('html, body').stop().animate({
        scrollTop: ($(target).offset().top) - 70
    }, 'slow')
})
for (k = 0; k < titleChapter.length; k++) {
    titleChapter[k].addEventListener('click', function() {
        $('html, body').stop().animate({
            scrollTop: ($('.box_category').position().top)
        }, 'slow')
    })
}
